"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.checkMetadata = void 0;

var util_1 = require("../../compile/util");

var def = {
  keyword: "metadata",
  schemaType: "object",
  code: function code(cxt) {
    checkMetadata(cxt);
    var gen = cxt.gen,
        schema = cxt.schema,
        it = cxt.it;
    if ((0, util_1.alwaysValidSchema)(it, schema)) return;
    var valid = gen.name("valid");
    cxt.subschema({
      keyword: "metadata",
      jtdMetadata: true
    }, valid);
    cxt.ok(valid);
  }
};

function checkMetadata(_ref, metadata) {
  var it = _ref.it,
      keyword = _ref.keyword;

  if (it.jtdMetadata !== metadata) {
    throw new Error("JTD: \"".concat(keyword, "\" cannot be used in this schema location"));
  }
}

exports.checkMetadata = checkMetadata;
exports["default"] = def;