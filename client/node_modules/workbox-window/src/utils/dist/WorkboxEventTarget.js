"use strict";
/*
  Copyright 2019 Google LLC

  Use of this source code is governed by an MIT-style
  license that can be found in the LICENSE file or at
  https://opensource.org/licenses/MIT.
*/
exports.__esModule = true;
exports.WorkboxEventTarget = void 0;
/**
 * A minimal `EventTarget` shim.
 * This is necessary because not all browsers support constructable
 * `EventTarget`, so using a real `EventTarget` will error.
 * @private
 */
var WorkboxEventTarget = /** @class */ (function () {
    function WorkboxEventTarget() {
        this._eventListenerRegistry = new Map();
    }
    /**
     * @param {string} type
     * @param {Function} listener
     * @private
     */
    WorkboxEventTarget.prototype.addEventListener = function (type, listener) {
        var foo = this._getEventListenersByType(type);
        foo.add(listener);
    };
    /**
     * @param {string} type
     * @param {Function} listener
     * @private
     */
    WorkboxEventTarget.prototype.removeEventListener = function (type, listener) {
        this._getEventListenersByType(type)["delete"](listener);
    };
    /**
     * @param {Object} event
     * @private
     */
    WorkboxEventTarget.prototype.dispatchEvent = function (event) {
        event.target = this;
        var listeners = this._getEventListenersByType(event.type);
        for (var _i = 0, listeners_1 = listeners; _i < listeners_1.length; _i++) {
            var listener = listeners_1[_i];
            listener(event);
        }
    };
    /**
     * Returns a Set of listeners associated with the passed event type.
     * If no handlers have been registered, an empty Set is returned.
     *
     * @param {string} type The event type.
     * @return {Set<ListenerCallback>} An array of handler functions.
     * @private
     */
    WorkboxEventTarget.prototype._getEventListenersByType = function (type) {
        if (!this._eventListenerRegistry.has(type)) {
            this._eventListenerRegistry.set(type, new Set());
        }
        return this._eventListenerRegistry.get(type);
    };
    return WorkboxEventTarget;
}());
exports.WorkboxEventTarget = WorkboxEventTarget;
