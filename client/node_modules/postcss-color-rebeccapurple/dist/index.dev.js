"use strict";

/**
 * Module dependencies.
 */
var postcss = require("postcss");

var valueParser = require("postcss-values-parser");

var color = "#639";
var regexp = /(^|[^\w-])rebeccapurple([^\w-]|$)/;
/**
 * PostCSS plugin to convert colors
 */

module.exports = postcss.plugin("postcss-color-rebeccapurple", function () {
  return function (style) {
    style.walkDecls(function (decl) {
      var value = decl.value;

      if (value && regexp.test(value)) {
        var valueAST = valueParser(value).parse();
        valueAST.walk(function (node) {
          if (node.type === "word" && node.value === "rebeccapurple") {
            node.value = color;
          }
        });
        decl.value = valueAST.toString();
      }
    });
  };
});